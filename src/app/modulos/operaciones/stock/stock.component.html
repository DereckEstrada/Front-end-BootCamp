
<div class="grid">
	<div class="col-12">
		<div class="text-900 font-bold text-6xl mb-4 text-left">Stock de productos</div>
		<div class="card">
			<h5>Lista de productos</h5>
			<p-table [value]="productStock"  [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10,25,50]">
				<ng-template pTemplate="caption">
					<div class="flex justify-content-between flex-column sm:flex-row">
						<span>
							<button pButton label="Registar Stock" class="p-button mb-2" icon="pi pi-plus" (click)="openRegistrarStock()"></button>
						</span>
						<span class="p-input-icon-left mb-2">
							<i class="pi pi-search"></i>
							<input pInputText [(ngModel)]="search" type="text" #filter placeholder="Buscar producto" (keyup)="buscarStock()" class="w-full"/>
						</span>
					</div>
				</ng-template>
				<ng-template pTemplate="header">
					<tr>
						<th style="min-width: 2rem">
							<div class="flex justify-content-between align-items-center">
								N
							</div>
						</th>
                        <th style="min-width: 12rem">
                            <div class="flex justify-content-between align-items-center" >
                                Producto
                            </div>
                        </th>
                        <th style="min-width: 12rem">
                            <div class="flex justify-content-between align-items-center" >
                                Empresa
                            </div>
                        </th>
                        <th style="min-width: 12rem">
                            <div class="flex justify-content-between align-items-center" >
                                Sucursal
                            </div>
                        </th>
                        <th style="min-width: 12rem">
                            <div class="flex justify-content-between align-items-center" >
                                Bodega
                            </div>
                        </th>
                        <th style="min-width: 12rem">
                            <div class="flex justify-content-between align-items-center" >
                                Stock
                            </div>
                        </th>
                        <th style="min-width: 12rem">
                            <div class="flex justify-content-between align-items-center" >
                                Fecha de ingreso
                            </div>
                        </th>
						<th style="min-width: 15rem">
							<div class="flex justify-content-between align-items-center">
								Acciones
							</div>
						</th>
					</tr>
				</ng-template>
				<ng-template pTemplate="body" let-rowIndex="rowIndex"  let-producto>
                    <tr>
						<td> {{ rowIndex + 1 }} </td>
                    	<td> {{ producto.prodDescripcion }} </td>
                    	<td> {{ producto.empresaDescripcion }} </td>
                    	<td> {{ producto.sucursalDescripcion }} </td>
                    	<td> {{ producto.bodegaDescripcion }} </td>
                    	<td> {{ producto.cantidadStock }} </td>
                    	<td> {{ producto.fechaHoraReg | date }} </td>
                    	<td>
                    	    <button pButton class="m-2" type="button" icon="pi pi-plus" label="Ingresar" (click)="openDialStock(producto)"></button>
                    	</td>
					</tr>
				</ng-template>
				<ng-template pTemplate="emptymessage">
					<tr>
						<td colspan="8">No hay productos registrados.</td>
					</tr>
				</ng-template>
				<ng-template pTemplate="loadingbody">
					<tr>
						<td colspan="8">Cargando productos...</td>
					</tr>
				</ng-template>
    		</p-table>
		</div>
	</div>
</div>
<app-dialogingresostock #dialogStock (emiterStock)="registrarStock($event)" ></app-dialogingresostock>
<app-dialogRegistrarStockcliente #dialogRegistro (stockEmitter)="registrarStock($event)" [listStock]="this.productStock"></app-dialogRegistrarStockcliente>
<p-toast position="top-left"/>